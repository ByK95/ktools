<!DOCTYPE html>
<html>
<head>
    <title>File Upload</title>
    <script>
        function handleFileSelect(evt) {
            evt.stopPropagation();
            evt.preventDefault();

            const files = evt.dataTransfer.files;
            const formData = new FormData();

            formData.append('file', files[0]);

            fetch('/upload', {
                method: 'POST',
                body: formData
            }).then(response => response.text())
              .then(data => alert(data))
              .catch(error => alert(error));
        }

        function handleDragOver(evt) {
            evt.stopPropagation();
            evt.preventDefault();
            evt.dataTransfer.dropEffect = 'copy';
        }

        function uploadFile() {
            const files = document.getElementById('fileInput').files;
            const formData = new FormData();

            formData.append('file', files[0]);

            fetch('/upload', {
                method: 'POST',
                body: formData
            }).then(response => response.text())
              .then(data => alert(data))
              .catch(error => alert(error));
        }
    </script>
</head>
<body>
    <a href="/list_files">See available files</a>
    <h1>Upload File</h1>

    <!-- Drag and Drop container -->
    <div id="dropZone" style="width:300px; height:200px; border:1px solid black;">
        Drop files here
    </div>

    <!-- File input for traditional upload -->
    <input type="file" id="fileInput">
    <button onclick="uploadFile()">Upload</button>

    <script>
        // Setup the drag and drop listeners.
        const dropZone = document.getElementById('dropZone');
        dropZone.addEventListener('dragover', handleDragOver, false);
        dropZone.addEventListener('drop', handleFileSelect, false);
    </script>

</body>
</html>
